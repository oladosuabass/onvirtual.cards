(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{463:function(e,t,r){"use strict";(function(e){r(32),r(33),r(9),r(51),r(69);var o=r(40),n=r(27),c=r(29),l=r(31),m=r(34),f=r(26),d=r(30),v=r(22),h=r(435),y=r(89),w=r(66),$=r(93),k=r(67),x=r(88);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=Object(f.a)(e);if(t){var n=Object(f.a)(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return Object(m.a)(this,r)}}var O=function(e,t,r,desc){var o,n=arguments.length,c=n<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(d.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(c=(n<3?o(c):n>3?o(t,r,c):o(t,r))||c);return n>3&&c&&Object.defineProperty(t,r,c),c},R=function(t){Object(l.a)(f,t);var r,m=_(f);function f(){var e;return Object(n.a)(this,f),(e=m.apply(this,arguments)).form={rootEmail:"",password:"",acceptedTerms:!1},e}return Object(c.a)(f,[{key:"tryToSubmitForm",value:(r=Object(o.a)(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,console.log("submit form checking validation"),!this.$v.form){e.next=7;break}if(this.$v.form.$touch(),!this.$v.form.$anyError){e.next=7;break}return console.log(this.$v.form),e.abrupt("return",null);case 7:if(!this.isRecaptchaEnabled){e.next=14;break}return e.next=10,this.$recaptcha.getResponse();case 10:return t=e.sent,console.log("ReCaptcha token:",t),e.next=14,this.$recaptcha.reset();case 14:console.log("submit form validation success"),k.Helpers.tokenize(this.$store).then((function(e){if(console.log("password tokenisation"),""===e.password)return null;r.form.password=e.password,r.validatePassword()}),(function(e){console.log("tokenisation failed",e)})),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.log("Login error:",e.t0);case 21:case"end":return e.stop()}}),e,this,[[0,18]])}))),function(){return r.apply(this,arguments)})},{key:"validatePassword",value:function(){console.log("password  validation");var e={identityProfileId:$.a.profileId.corporates?$.a.profileId.corporates:"",credentialType:"ROOT",password:{value:this.form.password}};y.Helpers.validatePassword(this.$store,e).then(this.submitForm.bind(this))}},{key:"submitForm",value:function(){return console.log("form success"),w.Helpers.resetErrors(this.$store),this.form}},{key:"checkOnKeyUp",value:function(e){"Enter"===e.key&&(e.preventDefault(),this.tryToSubmitForm())}},{key:"passwordBaseStyle",get:function(){return{color:"#495057",fontSize:"16px",fontSmoothing:"antialiased",fontFamily:"'Be Vietnam', sans-serif",fontWeight:"400",lineHeight:"24px",margin:"0",padding:"6px 12px",textIndent:"0px","::placeholder":{color:"#B6B9C7",fontWeight:"400"}}}},{key:"isRecaptchaEnabled",get:function(){return void 0!==e.env.RECAPTCHA}}]),f}(Object(v.mixins)(x.a));O([Object(v.Emit)()],R.prototype,"submitForm",null),R=O([Object(v.Component)({validations:{form:{rootEmail:{required:h.required,email:h.email},acceptedTerms:{required:h.required,sameAs:Object(h.sameAs)((function(){return!0}))}}},components:{ErrorAlert:function(){return r.e(1).then(r.bind(null,467))}}})],R),t.a=R}).call(this,r(120))},488:function(e,t,r){"use strict";r.r(t);var o=r(463).a,n=r(42),component=Object(n.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-form",{on:{submit:function(t){return t.preventDefault(),e.tryToSubmitForm(t)}}},[r("h3",{staticClass:"text-center font-weight-light mb-5"},[e._v("\n    Register\n  ")]),e._v(" "),r("error-alert"),e._v(" "),r("b-form-group",{attrs:{state:e.isInvalid(e.$v.form.rootEmail),label:"Email"}},[r("b-form-input",{attrs:{state:e.isInvalid(e.$v.form.rootEmail),placeholder:"name@email.com"},model:{value:e.$v.form.rootEmail.$model,callback:function(t){e.$set(e.$v.form.rootEmail,"$model",t)},expression:"$v.form.rootEmail.$model"}}),e._v(" "),r("b-form-invalid-feedback",[e._v("Email address invalid.")])],1),e._v(" "),r("client-only",{attrs:{placeholder:"Loading..."}},[r("weavr-form",{ref:"passwordForm",class:{"is-dirty":e.$v.form.$dirty}},[r("label",{staticClass:"d-block"},[e._v("PASSWORD")]),e._v(" "),r("weavr-input",{attrs:{options:{placeholder:"****",classNames:{empty:"is-invalid"}},"base-style":e.passwordBaseStyle,"class-name":"sign-in-password",name:"password",field:"password",required:"true"},on:{onKeyUp:e.checkOnKeyUp}}),e._v(" "),r("small",{staticClass:"form-text text-muted"},[e._v("Minimum 8, Maximum 50 characters.")])],1)],1),e._v(" "),r("b-form-row",{staticClass:"small mt-3 text-muted"},[r("b-col",[r("b-form-group",[r("b-form-checkbox",{attrs:{state:e.isInvalid(e.$v.form.acceptedTerms)},model:{value:e.$v.form.acceptedTerms.$model,callback:function(t){e.$set(e.$v.form.acceptedTerms,"$model",t)},expression:"$v.form.acceptedTerms.$model"}},[e._v("\n          I accept the\n          "),r("a",{staticClass:"text-decoration-underline text-muted",attrs:{href:"https://www.onvirtual.cards/terms/business",target:"_blank"}},[e._v("terms of use")]),e._v("\n          and\n          "),r("a",{staticClass:"text-decoration-underline text-muted",attrs:{href:"https://www.onvirtual.cards/policy/",target:"_blank"}},[e._v("privacy policy")])]),e._v(" "),r("b-form-invalid-feedback",[e._v("This field is required.")])],1)],1)],1),e._v(" "),e.isRecaptchaEnabled?r("div",{staticClass:"mt-2"},[r("recaptcha")],1):e._e(),e._v(" "),r("b-form-row",{staticClass:"mt-5"},[r("b-col",{staticClass:"text-center"},[r("b-button",{attrs:{variant:"secondary",type:"submit"}},[e._v("\n        continue\n        "),r("span",{staticClass:"pl-5"},[e._v("->")])])],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);