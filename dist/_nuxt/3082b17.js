(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{548:function(e,t,n){"use strict";n.r(t);n(32),n(33),n(9),n(51),n(69);var r=n(40),c=n(27),o=n(29),f=n(31),l=n(34),d=n(26),h=n(30),y=n(22),v=n(89),O=n(90),j=n(88),k=n(121),m=n(337);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var c=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var w=function(e,t,n,desc){var r,c=arguments.length,o=c<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(o=(c<3?r(o):c>3?r(t,n,o):r(t,n))||o);return c>3&&o&&Object.defineProperty(t,n,o),o},x=function(e){Object(f.a)(l,e);var t,n=R(l);function l(){var e;return Object(c.a)(this,l),(e=n.apply(this,arguments)).options={onMessage:e.onMessage},e}return Object(o.a)(l,[{key:"asyncData",value:(t=Object(r.a)(regeneratorRuntime.mark((function e(t){var n,r,c,o,f,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,r=t.redirect,c=v.Helpers.identityId(n),e.prev=2,e.next=5,O.Helpers.startKYC(n,c);case 5:return o=e.sent,e.abrupt("return",{reference:o.data.reference});case 9:if(e.prev=9,e.t0=e.catch(2),"KYC_ALREADY_APPROVED"!==e.t0.response.data.errorCode){e.next=16;break}return e.next=14,Object(k.a)(n).index();case 14:(f=e.sent).data.count>=1&&(l=f.data.account[0].id.id,r("/managed-accounts/"+l+"/topup"));case 16:case"end":return e.stop()}}),e,null,[[2,9]])}))),function(e){return t.apply(this,arguments)})},{key:"onMessage",value:function(e,t){console.log(e,t),"kycSubmitted"===e&&this.$router.push("/managed-accounts/kyc/check")}},{key:"receiveMessage",value:function(e){switch(console.log(e),e.data.status){case"failed":this.$router.push("/managed-accounts/kyc/failed");break;case"approved":this.$router.push("/managed-accounts/kyc/check")}}}]),l}(Object(y.mixins)(j.a)),D=x=w([Object(y.Component)({components:{WeavrConsumerKyc:m.a}})],x),C=n(42),component=Object(C.a)(D,(function(){var e=this.$createElement,t=this._self._c||e;return t("section",[t("b-container",[t("b-row",[t("b-col",[t("weavr-consumer-kyc",{attrs:{reference:this.reference,options:this.options}})],1)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);