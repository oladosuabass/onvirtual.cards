(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{462:function(e){e.exports=JSON.parse('[{"name":"Austria","alpha-2":"AT","alpha-3":"AUT","country-code":"040","iso_3166-2":"ISO 3166-2:AT","region":"Europe","sub-region":"Western Europe","intermediate-region":"","region-code":"150","sub-region-code":"155","intermediate-region-code":""},{"name":"Belgium","alpha-2":"BE","alpha-3":"BEL","country-code":"056","iso_3166-2":"ISO 3166-2:BE","region":"Europe","sub-region":"Western Europe","intermediate-region":"","region-code":"150","sub-region-code":"155","intermediate-region-code":""},{"name":"Bulgaria","alpha-2":"BG","alpha-3":"BGR","country-code":"100","iso_3166-2":"ISO 3166-2:BG","region":"Europe","sub-region":"Eastern Europe","intermediate-region":"","region-code":"150","sub-region-code":"151","intermediate-region-code":""},{"name":"Croatia","alpha-2":"HR","alpha-3":"HRV","country-code":"191","iso_3166-2":"ISO 3166-2:HR","region":"Europe","sub-region":"Southern Europe","intermediate-region":"","region-code":"150","sub-region-code":"039","intermediate-region-code":""},{"name":"Cyprus","alpha-2":"CY","alpha-3":"CYP","country-code":"196","iso_3166-2":"ISO 3166-2:CY","region":"Asia","sub-region":"Western Asia","intermediate-region":"","region-code":"142","sub-region-code":"145","intermediate-region-code":""},{"name":"Czechia","alpha-2":"CZ","alpha-3":"CZE","country-code":"203","iso_3166-2":"ISO 3166-2:CZ","region":"Europe","sub-region":"Eastern Europe","intermediate-region":"","region-code":"150","sub-region-code":"151","intermediate-region-code":""},{"name":"Denmark","alpha-2":"DK","alpha-3":"DNK","country-code":"208","iso_3166-2":"ISO 3166-2:DK","region":"Europe","sub-region":"Northern Europe","intermediate-region":"","region-code":"150","sub-region-code":"154","intermediate-region-code":""},{"name":"Estonia","alpha-2":"EE","alpha-3":"EST","country-code":"233","iso_3166-2":"ISO 3166-2:EE","region":"Europe","sub-region":"Northern Europe","intermediate-region":"","region-code":"150","sub-region-code":"154","intermediate-region-code":""},{"name":"Finland","alpha-2":"FI","alpha-3":"FIN","country-code":"246","iso_3166-2":"ISO 3166-2:FI","region":"Europe","sub-region":"Northern Europe","intermediate-region":"","region-code":"150","sub-region-code":"154","intermediate-region-code":""},{"name":"France","alpha-2":"FR","alpha-3":"FRA","country-code":"250","iso_3166-2":"ISO 3166-2:FR","region":"Europe","sub-region":"Western Europe","intermediate-region":"","region-code":"150","sub-region-code":"155","intermediate-region-code":""},{"name":"Germany","alpha-2":"DE","alpha-3":"DEU","country-code":"276","iso_3166-2":"ISO 3166-2:DE","region":"Europe","sub-region":"Western Europe","intermediate-region":"","region-code":"150","sub-region-code":"155","intermediate-region-code":""},{"name":"Greece","alpha-2":"GR","alpha-3":"GRC","country-code":"300","iso_3166-2":"ISO 3166-2:GR","region":"Europe","sub-region":"Southern Europe","intermediate-region":"","region-code":"150","sub-region-code":"039","intermediate-region-code":""},{"name":"Hungary","alpha-2":"HU","alpha-3":"HUN","country-code":"348","iso_3166-2":"ISO 3166-2:HU","region":"Europe","sub-region":"Eastern Europe","intermediate-region":"","region-code":"150","sub-region-code":"151","intermediate-region-code":""},{"name":"Iceland","alpha-2":"IS","alpha-3":"ISL","country-code":"352","iso_3166-2":"ISO 3166-2:IS","region":"Europe","sub-region":"Northern Europe","intermediate-region":"","region-code":"150","sub-region-code":"154","intermediate-region-code":""},{"name":"Italy","alpha-2":"IT","alpha-3":"ITA","country-code":"380","iso_3166-2":"ISO 3166-2:IT","region":"Europe","sub-region":"Southern Europe","intermediate-region":"","region-code":"150","sub-region-code":"039","intermediate-region-code":""},{"name":"Latvia","alpha-2":"LV","alpha-3":"LVA","country-code":"428","iso_3166-2":"ISO 3166-2:LV","region":"Europe","sub-region":"Northern Europe","intermediate-region":"","region-code":"150","sub-region-code":"154","intermediate-region-code":""},{"name":"Liechtenstein","alpha-2":"LI","alpha-3":"LIE","country-code":"438","iso_3166-2":"ISO 3166-2:LI","region":"Europe","sub-region":"Western Europe","intermediate-region":"","region-code":"150","sub-region-code":"155","intermediate-region-code":""},{"name":"Lithuania","alpha-2":"LT","alpha-3":"LTU","country-code":"440","iso_3166-2":"ISO 3166-2:LT","region":"Europe","sub-region":"Northern Europe","intermediate-region":"","region-code":"150","sub-region-code":"154","intermediate-region-code":""},{"name":"Luxembourg","alpha-2":"LU","alpha-3":"LUX","country-code":"442","iso_3166-2":"ISO 3166-2:LU","region":"Europe","sub-region":"Western Europe","intermediate-region":"","region-code":"150","sub-region-code":"155","intermediate-region-code":""},{"name":"Malta","alpha-2":"MT","alpha-3":"MLT","country-code":"470","iso_3166-2":"ISO 3166-2:MT","region":"Europe","sub-region":"Southern Europe","intermediate-region":"","region-code":"150","sub-region-code":"039","intermediate-region-code":""},{"name":"Netherlands","alpha-2":"NL","alpha-3":"NLD","country-code":"528","iso_3166-2":"ISO 3166-2:NL","region":"Europe","sub-region":"Western Europe","intermediate-region":"","region-code":"150","sub-region-code":"155","intermediate-region-code":""},{"name":"Norway","alpha-2":"NO","alpha-3":"NOR","country-code":"578","iso_3166-2":"ISO 3166-2:NO","region":"Europe","sub-region":"Northern Europe","intermediate-region":"","region-code":"150","sub-region-code":"154","intermediate-region-code":""},{"name":"Poland","alpha-2":"PL","alpha-3":"POL","country-code":"616","iso_3166-2":"ISO 3166-2:PL","region":"Europe","sub-region":"Eastern Europe","intermediate-region":"","region-code":"150","sub-region-code":"151","intermediate-region-code":""},{"name":"Portugal","alpha-2":"PT","alpha-3":"PRT","country-code":"620","iso_3166-2":"ISO 3166-2:PT","region":"Europe","sub-region":"Southern Europe","intermediate-region":"","region-code":"150","sub-region-code":"039","intermediate-region-code":""},{"name":"Romania","alpha-2":"RO","alpha-3":"ROU","country-code":"642","iso_3166-2":"ISO 3166-2:RO","region":"Europe","sub-region":"Eastern Europe","intermediate-region":"","region-code":"150","sub-region-code":"151","intermediate-region-code":""},{"name":"Slovakia","alpha-2":"SK","alpha-3":"SVK","country-code":"703","iso_3166-2":"ISO 3166-2:SK","region":"Europe","sub-region":"Eastern Europe","intermediate-region":"","region-code":"150","sub-region-code":"151","intermediate-region-code":""},{"name":"Slovenia","alpha-2":"SI","alpha-3":"SVN","country-code":"705","iso_3166-2":"ISO 3166-2:SI","region":"Europe","sub-region":"Southern Europe","intermediate-region":"","region-code":"150","sub-region-code":"039","intermediate-region-code":""},{"name":"Spain","alpha-2":"ES","alpha-3":"ESP","country-code":"724","iso_3166-2":"ISO 3166-2:ES","region":"Europe","sub-region":"Southern Europe","intermediate-region":"","region-code":"150","sub-region-code":"039","intermediate-region-code":""},{"name":"Sweden","alpha-2":"SE","alpha-3":"SWE","country-code":"752","iso_3166-2":"ISO 3166-2:SE","region":"Europe","sub-region":"Northern Europe","intermediate-region":"","region-code":"150","sub-region-code":"154","intermediate-region-code":""},{"name":"United Kingdom","alpha-2":"GB","alpha-3":"GBR","country-code":"826","iso_3166-2":"ISO 3166-2:GB","region":"Europe","sub-region":"Northern Europe","intermediate-region":"","region-code":"150","sub-region-code":"154","intermediate-region-code":""}]')},554:function(e,o,r){"use strict";r.r(o);r(32),r(33),r(9),r(51),r(69);var n=r(40),t=r(27),c=r(29),d=r(31),l=r(34),m=r(26),h=r(30),y=r(64),f=r(22),E=r(530),v=r(435),C=r(89),I=r(90),S=r(88),O=r(121);function _(e){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(m.a)(e);if(o){var t=Object(m.a)(this).constructor;r=Reflect.construct(n,arguments,t)}else r=n.apply(this,arguments);return Object(l.a)(this,r)}}var R=function(e,o,r,desc){var n,t=arguments.length,c=t<3?o:null===desc?desc=Object.getOwnPropertyDescriptor(o,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,o,r,desc);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(c=(t<3?n(c):t>3?n(o,r,c):n(o,r))||c);return t>3&&c&&Object.defineProperty(o,r,c),c},N=r(462),V=Object(y.namespace)(I.name),k=function(e){Object(d.a)(l,e);var o,r=_(l);function l(){var e;return Object(t.a)(this,l),(e=r.apply(this,arguments)).nonce="",e.verificationIssue=!1,e.mobile={countryCode:"GB",number:""},e.dismissSecs=60,e.dismissCountDown=0,e.numberIsValid=null,e}return Object(c.a)(l,[{key:"countDownChanged",value:function(e){this.dismissCountDown=e}},{key:"showAlert",value:function(){this.dismissCountDown=this.dismissSecs}},{key:"nonceChanged",value:function(e){this.consumerVerifyMobileRequest.request.nonce=e,this.corporateVerifyMobileRequest.request.nonce=e}},{key:"asyncData",value:(o=Object(n.a)(regeneratorRuntime.mark((function e(o){var r,n,t,c,d,l,m,h,y,f,v,S,_;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.store,t=o.redirect,c={consumerId:0,request:{mobileNumber:"",mobileCountryCode:"",nonce:""}},d={corporateId:0,request:{mobileNumber:"",mobileCountryCode:"",nonce:""}},!C.Helpers.isConsumer(n)){e.next=17;break}if(null==(y=C.Helpers.identityId(n))){e.next=12;break}return e.next=8,I.Helpers.get(n,y);case 8:f=e.sent,c.consumerId=y,c.request.mobileCountryCode=f.data.mobileCountryCode,c.request.mobileNumber=f.data.mobileNumber;case 12:l=c.request.mobileCountryCode+c.request.mobileNumber,m=Object(E.a)(l),h=c.request.mobileNumber,e.next=33;break;case 17:if(!C.Helpers.isCorporate(n)){e.next=32;break}if(v=C.Helpers.identityId(n),S=C.Helpers.auth(n),null==v||!S.credential){e.next=27;break}return e.next=23,Object(O.c)(n).getUser({corporateId:v,userId:S.credential.id});case 23:_=e.sent,d.corporateId=v,null!=_.data.mobileCountryCode&&(d.request.mobileCountryCode=_.data.mobileCountryCode),null!=_.data.mobileNumber&&(d.request.mobileNumber=_.data.mobileNumber);case 27:l=d.request.mobileCountryCode+d.request.mobileNumber,m=Object(E.a)(l),h=d.request.mobileNumber,e.next=33;break;case 32:t("/");case 33:return e.abrupt("return",{consumerVerifyMobileRequest:c,corporateVerifyMobileRequest:d,mobile:{countryCode:null===(r=m)||void 0===r?void 0:r.country,number:h}});case 34:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})},{key:"doVerify",value:function(e){if(e.preventDefault(),this.$v.nonce&&(this.$v.nonce.$touch(),this.$v.nonce.$anyError))return null;0!==this.consumerVerifyMobileRequest.consumerId?this.doVerifyConsumer():this.doVerifyCorporate()}},{key:"doVerifyCorporate",value:function(){this.stores.corporates.verifyMobile(this.corporateVerifyMobileRequest).then(this.getCorporate.bind(this),this.errorOccurred.bind(this))}},{key:"doVerifyConsumer",value:function(){I.Helpers.verifyMobile(this.$store,this.consumerVerifyMobileRequest).then(this.getConsumer.bind(this),this.errorOccurred.bind(this))}},{key:"errorOccurred",value:function(e){console.log(e)}},{key:"getCorporate",value:function(){this.stores.corporates.getCorporateDetails(this.corporateVerifyMobileRequest.corporateId).then(this.goToDashboard.bind(this),this.errorOccurred.bind(this))}},{key:"getConsumer",value:function(){I.Helpers.get(this.$store,this.consumerVerifyMobileRequest.consumerId).then(this.goToDashboard.bind(this),this.errorOccurred.bind(this))}},{key:"goToDashboard",value:function(){this.$router.push("/")}},{key:"mounted",value:function(){this.$route.query.send&&"true"===this.$route.query.send&&this.sendVerifyPhone()}},{key:"sendVerifyPhone",value:function(){this.showAlert(),0!==this.consumerVerifyMobileRequest.consumerId?this.sendVerifyPhoneConsumer():this.sendVerifyPhoneCorporate()}},{key:"sendVerifyPhoneCorporate",value:function(){var e=this;return this.stores.corporates.sendVerificationCodeMobile(this.corporateVerifyMobileRequest).catch((function(){e.verificationIssue=!0,e.dismissCountDown=0}))}},{key:"sendVerifyPhoneConsumer",value:function(){var e=this;return I.Helpers.sendVerificationCodeMobile(this.$store,this.consumerVerifyMobileRequest).catch((function(){e.verificationIssue=!0,e.dismissCountDown=0}))}},{key:"phoneUpdate",value:function(e){this.$set(this.mobile,"number",e.formatNational?e.formatNational:e.phoneNumber),this.consumerVerifyMobileRequest.request.mobileCountryCode=e.countryCallingCode,this.consumerVerifyMobileRequest.request.mobileNumber=e.nationalNumber,this.corporateVerifyMobileRequest.request.mobileCountryCode=e.countryCallingCode,this.corporateVerifyMobileRequest.request.mobileNumber=e.nationalNumber,this.numberIsValid=e.isValid}},{key:"mobileCountries",get:function(){return N.map((function(e){return e["alpha-2"]}))}}]),l}(Object(f.mixins)(S.a));R([V.Getter],k.prototype,"isLoading",void 0),R([V.Getter],k.prototype,"consumer",void 0);var x=k=R([Object(f.Component)({layout:"auth",components:{ErrorAlert:function(){return r.e(1).then(r.bind(null,467))},LoaderButton:function(){return r.e(0).then(r.bind(null,466))}},validations:{nonce:{required:v.required,minLength:Object(v.minLength)(6),maxLength:Object(v.maxLength)(6)}}})],k),L=r(42),component=Object(L.a)(x,(function(){var e=this,o=e.$createElement,r=e._self._c||o;return r("b-col",{attrs:{lg:"6","offset-lg":"3"}},[r("div",{staticClass:"text-center pb-5"},[r("img",{staticClass:"d-inline-block align-top",attrs:{src:"/img/logo.svg",width:"200",alt:"onvirtual.cards"}})]),e._v(" "),r("div",[r("b-card",{staticClass:"py-5 px-5 mt-5"},[r("h3",{staticClass:"font-weight-light text-center"},[e._v("\n        Let's also verify your phone number\n      ")]),e._v(" "),r("b-row",[r("b-col",{staticClass:"text-center",attrs:{md:"6","offset-md":"3"}},[r("b-img",{staticClass:"mt-5 mb-2",attrs:{fluid:"",src:"/img/mobile.svg"}})],1)],1),e._v(" "),r("error-alert"),e._v(" "),r("p",{staticClass:"text-center my-5 text-grey"},[e._v("\n        We’ve just sent you a verification code by SMS. Enter code below to verify your phone number.\n      ")]),e._v(" "),r("form",{attrs:{id:"form-verify"},on:{submit:e.doVerify}},[r("b-row",[r("b-col",{attrs:{md:"4","offset-md":"4"}},[r("b-form-group",{attrs:{label:""}},[r("b-form-input",{staticClass:"text-center",attrs:{state:e.isInvalid(e.$v.nonce),placeholder:"000000"},on:{update:e.nonceChanged},model:{value:e.nonce,callback:function(o){e.nonce=o},expression:"nonce"}}),e._v(" "),r("b-form-invalid-feedback",[e._v("This field is required and must be 6 characters.")])],1)],1)],1),e._v(" "),r("loader-button",{staticClass:"mt-5 text-center mb-0",attrs:{"is-loading":e.isLoading,"button-text":"verify"}})],1),e._v(" "),r("b-alert",{staticClass:"text-center mt-4 mb-0 text-muted small",attrs:{show:e.dismissCountDown,variant:"white"},on:{"dismiss-count-down":e.countDownChanged}},[e._v("\n        "+e._s(e.dismissCountDown)+" seconds until you can send another verification code\n      ")]),e._v(" "),e.dismissCountDown?e._e():r("div",{staticClass:"mt-4 text-center"},[e.verificationIssue?[r("small",{staticClass:"text-grey"},[e._v("We could not verify your mobile number. Please contact support for\n            assistance")])]:[r("small",{staticClass:"text-grey"},[e._v("\n            Didn’t receive a code?\n            "),r("b-link",{staticClass:"text-decoration-underline text-grey",on:{click:e.sendVerifyPhone}},[e._v("Send again")]),e._v("\n            .\n          ")],1)]],2)],1)],1)])}),[],!1,null,null,null);o.default=component.exports}}]);