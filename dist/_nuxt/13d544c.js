(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{540:function(e,t,r){"use strict";r.r(t);r(32),r(33),r(9),r(51),r(39),r(69);var o=r(40),n=r(27),l=r(29),m=r(31),d=r(34),c=r(26),f=r(30),C=r(22),v=r(64),h=r(530),y=r(435),N=r(89),w=r(90),I=r(88),_=r(121);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=Object(c.a)(e);if(t){var n=Object(c.a)(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return Object(d.a)(this,r)}}var j=function(e,t,r,desc){var o,n=arguments.length,l=n<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,desc);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(l=(n<3?o(l):n>3?o(t,r,l):o(t,r))||l);return n>3&&l&&Object.defineProperty(t,r,l),l},x=Object(v.namespace)(N.name),O=Object(v.namespace)(w.name),$=function(e){Object(m.a)(d,e);var t,r=k(d);function d(){var e;return Object(n.a)(this,d),(e=r.apply(this,arguments)).numberIsValid=null,e.isLoading=!1,e}return Object(l.a)(d,[{key:"asyncData",value:(t=Object(o.a)(regeneratorRuntime.mark((function e(t){var r,o,n,l,m,d,c,f,C;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.store,!(o=N.Helpers.identityId(r))){e.next=22;break}if(!N.Helpers.isConsumer(r)){e.next=12;break}return e.next=6,w.Helpers.get(r,o);case 6:return n=e.sent,l=Object(h.a)(n.data.mobileCountryCode+n.data.mobileNumber),m={consumerId:o,request:{mobileCountryCode:n.data.mobileCountryCode,mobileNumber:n.data.mobileNumber,email:n.data.email}},e.abrupt("return",{updateConsumer:m,mobile:{mobileCountryCode:null==l?void 0:l.country,mobileNumber:n.data.mobileNumber}});case 12:if(!N.Helpers.isCorporate(r)){e.next=22;break}return d=N.Helpers.auth(r),e.next=16,Object(_.c)(r).getCorporateDetails(o);case 16:return e.next=18,Object(_.c)(r).getUser({corporateId:o,userId:d.credential.id});case 18:return c=e.sent,f=Object(h.a)(c.data.mobileCountryCode+c.data.mobileNumber),C={corporateId:o,userId:d.credential.id,body:{name:c.data.name,surname:c.data.surname,mobileCountryCode:c.data.mobileCountryCode,mobileNumber:c.data.mobileNumber,email:c.data.email}},e.abrupt("return",{updateCorporate:C,mobile:{mobileCountryCode:null==f?void 0:f.country,mobileNumber:c.data.mobileNumber}});case 22:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"consumerPhoneUpdate",value:function(e){this.$set(this.mobile,"mobileNumber",e.formatNational?e.formatNational:e.phoneNumber),this.updateConsumer.request.mobileNumber=e.phoneNumber,this.numberIsValid=e.isValid}},{key:"corporatePhoneUpdate",value:function(e){this.$set(this.mobile,"mobileNumber",e.formatNational?e.formatNational:e.phoneNumber),this.updateCorporate.body.mobileNumber=e.phoneNumber,this.numberIsValid=e.isValid}},{key:"doUpdateConsumer",value:function(e){var t=this;if(e.preventDefault(),null===this.numberIsValid&&(this.numberIsValid=!1),this.$v.updateConsumer&&(this.$v.updateConsumer.$touch(),this.$v.updateConsumer.$anyError||!this.numberIsValid))return null;this.isLoading=!0,w.Helpers.update(this.$store,this.updateConsumer).then((function(){t.isLoading=!1}))}},{key:"doUpdateCorporate",value:function(e){var t=this;if(e.preventDefault(),null===this.numberIsValid&&(this.numberIsValid=!1),this.$v.updateCorporate&&(this.$v.updateCorporate.$touch(),this.$v.updateCorporate.$anyError||!this.numberIsValid))return null;this.isLoading=!0,this.stores.corporates.updateUser(this.updateCorporate).then((function(){t.isLoading=!1}))}},{key:"corporate",get:function(){return this.stores.corporates.corporate}}]),d}(Object(C.mixins)(I.a));j([x.Action],$.prototype,"logout",void 0),j([x.Getter],$.prototype,"isConsumer",void 0),j([x.Getter],$.prototype,"isCorporate",void 0),j([x.Getter],$.prototype,"identityId",void 0),j([O.Getter],$.prototype,"consumer",void 0);var E=$=j([Object(C.Component)({components:{ErrorAlert:function(){return r.e(1).then(r.bind(null,467))},LoaderButton:function(){return r.e(0).then(r.bind(null,466))}},validations:{updateConsumer:{request:{mobileNumber:{required:y.required},mobileCountryCode:{required:y.required},email:{required:y.required,email:y.email}}},updateCorporate:{body:{mobileNumber:{required:y.required},mobileCountryCode:{required:y.required},email:{required:y.required,email:y.email}}}}})],$),R=r(42),component=Object(R.a)(E,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"py-5"},[r("b-container",[r("b-row",[r("b-col",{attrs:{md:"6","offset-md":"3"}},[e.isConsumer?[r("b-form",{attrs:{novalidate:""},on:{submit:e.doUpdateConsumer}},[r("error-alert"),e._v(" "),r("b-form-row",[r("b-col",[r("b-form-group",{attrs:{label:"FIRST NAME"}},[r("b-form-input",{staticClass:"form-control",attrs:{placeholder:"John",disabled:""},model:{value:e.consumer.name,callback:function(t){e.$set(e.consumer,"name",t)},expression:"consumer.name"}})],1)],1),e._v(" "),r("b-col",[r("b-form-group",{attrs:{label:"LAST NAME"}},[r("b-form-input",{staticClass:"form-control",attrs:{placeholder:"Doe",disabled:""},model:{value:e.consumer.surname,callback:function(t){e.$set(e.consumer,"surname",t)},expression:"consumer.surname"}})],1)],1)],1),e._v(" "),r("b-form-row",[r("b-col",[r("b-form-group",{attrs:{label:"E-Mail"}},[r("b-form-input",{staticClass:"form-control",attrs:{state:e.isInvalid(e.$v.updateConsumer.request.email),placeholder:"johndoe@email.com"},model:{value:e.updateConsumer.request.email,callback:function(t){e.$set(e.updateConsumer.request,"email",t)},expression:"updateConsumer.request.email"}})],1)],1)],1),e._v(" "),r("b-form-row",[r("b-col",[r("b-form-group",{attrs:{label:"MOBILE NUMBER"}},[r("vue-phone-number-input",{attrs:{value:e.mobile.mobileNumber,error:!1===e.numberIsValid,"border-radius":0,defaultCountryCode:e.mobile.mobileCountryCode,color:"#6C1C5C","error-color":"#F50E4C","valid-color":"#6D7490"},on:{update:e.consumerPhoneUpdate}}),e._v(" "),!1===e.numberIsValid?r("b-form-invalid-feedback",{attrs:{"force-show":""}},[e._v("\n                    This field must be a valid mobile number.\n                  ")]):e._e()],1)],1)],1),e._v(" "),r("b-form-row",{staticClass:"my-4"},[r("b-col",{staticClass:"text-center"},[r("b-link",{staticClass:"link",attrs:{to:"/profile/password/change"}},[e._v("\n                  Change password\n                ")])],1)],1),e._v(" "),r("b-row",{staticClass:"mt-5",attrs:{"align-v":"center"}},[r("b-col",{staticClass:"text-center"},[r("loader-button",{attrs:{"is-loading":e.isLoading,"button-text":"save"}})],1)],1)],1)]:e._e(),e._v(" "),e.isCorporate?[r("b-form",{attrs:{novalidate:""},on:{submit:e.doUpdateCorporate}},[r("error-alert"),e._v(" "),r("b-form-row",[r("b-col",[r("b-form-group",{attrs:{label:"FIRST NAME"}},[r("b-form-input",{staticClass:"form-control",attrs:{placeholder:"John"},model:{value:e.updateCorporate.body.name,callback:function(t){e.$set(e.updateCorporate.body,"name",t)},expression:"updateCorporate.body.name"}})],1)],1),e._v(" "),r("b-col",[r("b-form-group",{attrs:{label:"LAST NAME"}},[r("b-form-input",{staticClass:"form-control",attrs:{placeholder:"Doe"},model:{value:e.updateCorporate.body.surname,callback:function(t){e.$set(e.updateCorporate.body,"surname",t)},expression:"updateCorporate.body.surname"}})],1)],1)],1),e._v(" "),r("b-form-row",[r("b-col",[r("b-form-group",{attrs:{label:"E-Mail"}},[r("b-form-input",{staticClass:"form-control",attrs:{state:e.isInvalid(e.$v.updateCorporate.body.email),placeholder:"johndoe@email.com"},model:{value:e.updateCorporate.body.email,callback:function(t){e.$set(e.updateCorporate.body,"email",t)},expression:"updateCorporate.body.email"}})],1)],1)],1),e._v(" "),r("b-form-row",[r("b-col",[r("b-form-group",{attrs:{label:"MOBILE NUMBER"}},[r("vue-phone-number-input",{attrs:{value:e.mobile.mobileNumber,error:!1===e.numberIsValid,"border-radius":0,defaultCountryCode:e.mobile.mobileCountryCode,color:"#6C1C5C","error-color":"#F50E4C","valid-color":"#6D7490"},on:{update:e.corporatePhoneUpdate}}),e._v(" "),!1===e.numberIsValid?r("b-form-invalid-feedback",{attrs:{"force-show":""}},[e._v("\n                    This field must be a valid mobile number.\n                  ")]):e._e()],1)],1)],1),e._v(" "),r("b-form-row",{staticClass:"my-4"},[r("b-col",{staticClass:"text-center"},[r("b-link",{staticClass:"link",attrs:{to:"/profile/password/change"}},[e._v("\n                  Change password\n                ")])],1)],1),e._v(" "),r("b-row",{staticClass:"mt-5",attrs:{"align-v":"center"}},[r("b-col",{staticClass:"text-center"},[r("loader-button",{attrs:{"is-loading":e.isLoading,"button-text":"save"}})],1)],1)],1)]:e._e()],2)],1)],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);