(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{534:function(t,e,r){"use strict";r.r(e);r(32),r(33),r(9),r(51);var o,n=r(27),c=r(29),d=r(31),l=r(34),h=r(26),f=r(30),m=r(64),y=r(22),R=r(89),v=r(93);!function(t){t.NO_TYPE="NO_TYPE",t.SOLE_TRADER="SOLE_TRADER",t.LLC="LLC"}(o||(o={}));var O=r(88);function C(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,o=Object(h.a)(t);if(e){var n=Object(h.a)(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return Object(l.a)(this,r)}}var E=function(t,e,r,desc){var o,n=arguments.length,c=n<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,r,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(c=(n<3?o(c):n>3?o(e,r,c):o(e,r))||c);return n>3&&c&&Object.defineProperty(e,r,c),c},N=Object(m.namespace)(R.name),T=function(t){Object(d.a)(r,t);var e=C(r);function r(){var t;return Object(n.a)(this,r),(t=e.apply(this,arguments)).screen=0,t.password="",t.registrationRequest={active:!0,acceptedTerms:!1,companyName:"",companyRegistrationNumber:"",companyType:o.LLC,ipAddress:"111.222.333.444",profileId:"0",registrationCountry:"MT",rootCompanyPosition:"",rootEmail:"",rootMobileCountryCode:"",rootMobileNumber:"",rootName:"",rootSurname:"",supportEmail:"",industry:null,sourceOfFunds:null,sourceOfFundsOther:"",kybProviderKey:"sumsub"},t}return Object(c.a)(r,[{key:"nextScreen",value:function(){this.screen++}},{key:"goBack",value:function(){this.screen--}},{key:"form1Submit",value:function(t){null!=t&&(this.registrationRequest.rootEmail=t.rootEmail,this.registrationRequest.supportEmail=t.rootEmail,this.password=t.password,this.registrationRequest.acceptedTerms=t.acceptedTerms,this.screen=1)}},{key:"form2Submit",value:function(t){null!=t&&(this.registrationRequest.rootName=t.rootName,this.registrationRequest.rootSurname=t.rootSurname,this.registrationRequest.rootCompanyPosition=t.rootCompanyPosition,this.registrationRequest.rootMobileCountryCode=t.rootMobileCountryCode,this.registrationRequest.rootMobileNumber=t.rootMobileNumber,this.registrationRequest.companyName=t.companyName,this.registrationRequest.companyRegistrationNumber=t.companyRegistrationNumber,this.registrationRequest.registrationCountry=t.registrationCountry,this.registrationRequest.industry=t.industry,this.registrationRequest.sourceOfFunds=t.sourceOfFunds,this.registrationRequest.sourceOfFundsOther=t.sourceOfFundsOther,this.doRegister())}},{key:"doRegister",value:function(){this.stores.corporates.SET_IS_LOADING_REGISTRATION(!0),this.stores.corporates.register(this.registrationRequest).then(this.doCreateCorporatePasswordIdentity.bind(this)).catch(this.registrationFailed.bind(this))}},{key:"registrationFailed",value:function(t){this.stores.corporates.SET_IS_LOADING_REGISTRATION(!1);var e=t.response.data.errorCode;"ROOT_USERNAME_NOT_UNIQUE"===e||"ROOT_EMAIL_NOT_UNIQUE"===e?this.screen=0:this.$weavrToastError(e)}},{key:"doCreateCorporatePasswordIdentity",value:function(){var t={id:this.corporate.id.id,request:{profileId:this.registrationRequest.profileId}};R.Helpers.createPasswordIdentity(this.$store,t).then(this.doCreateCorporatePassword.bind(this),this.registrationFailed.bind(this))}},{key:"doCreateCorporatePassword",value:function(){var t={id:this.corporate.id.id,request:{credentialType:"ROOT",identityId:this.corporate.id.id,password:{value:this.password}}};R.Helpers.createPassword(this.$store,t).then(this.waitAndDoLogin.bind(this),this.registrationFailed.bind(this))}},{key:"waitAndDoLogin",value:function(){this.sleep(2e3).then(this.doLogin.bind(this))}},{key:"doLogin",value:function(){var t={code:this.registrationRequest.rootEmail,password:this.password};R.Helpers.authenticate(this.$store,t).then(this.goToVerifyEmail.bind(this),this.registrationFailed.bind(this))}},{key:"goToVerifyEmail",value:function(){this.stores.corporates.SET_IS_LOADING_REGISTRATION(!1),this.$router.push({path:"/register/verify",query:{send:"true",corp:this.corporate.id.id+"",email:this.registrationRequest.rootEmail,mobileNumber:this.registrationRequest.rootMobileNumber,mobileCountryCode:this.registrationRequest.rootMobileCountryCode}})}},{key:"checkOnKeyUp",value:function(t){"Enter"===t.key&&(t.preventDefault(),this.stores.corporates.register(t))}},{key:"mounted",value:function(){this.registrationRequest.profileId=v.a.profileId.corporates}},{key:"asyncData",value:function(t){var e=t.store,r=t.redirect;e.getters["auth/isLoggedIn"]&&r("/dashboard")}},{key:"isLoading",get:function(){return this.stores.corporates.isLoading}},{key:"corporate",get:function(){return this.stores.corporates.corporate}}]),r}(Object(y.mixins)(O.a));E([N.Getter],T.prototype,"isLoggedIn",void 0);var I=T=E([Object(y.Component)({layout:"auth",components:{LoaderButton:function(){return r.e(0).then(r.bind(null,466))},RegisterForm:function(){return r.e(50).then(r.bind(null,488))},PersonalDetailsForm:function(){return r.e(49).then(r.bind(null,532))},RegistrationNav:function(){return r.e(6).then(r.bind(null,519))},ComingSoonCurrencies:function(){return r.e(7).then(r.bind(null,520))}}})],T),k=r(42),component=Object(k.a)(I,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-col",{attrs:{lg:"6","offset-lg":"3"}},[r("div",{staticClass:"text-center pb-5"},[r("img",{staticClass:"d-inline-block align-top",attrs:{src:"/img/logo.svg",width:"200",alt:"onvirtual.cards"}})]),t._v(" "),r("b-card",{staticClass:"overflow-hidden",attrs:{"no-body":""}},[r("b-card-body",{staticClass:"p-card"},[r("div",{staticClass:"form-screens"},[r("div",{staticClass:"form-screen",class:{"d-none":0!==t.screen}},[r("register-form",{attrs:{request:t.registrationRequest},on:{"submit-form":t.form1Submit}})],1),t._v(" "),r("div",{staticClass:"form-screen",class:{"d-none":1!==t.screen}},[r("personal-details-form",{attrs:{request:t.registrationRequest},on:{"submit-form":t.form2Submit,"go-back":t.goBack}})],1)])])],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);